%%%%%%%%%% State space dynamic equations of the system
function dxdt = plant_3r(x, tau)
th1 = x(1);
th1_d = x(2);
th2 = x(3);
th2_d = x(4);
th3 = x(5);
th3_d = x(6);
dxdt = zeros(1,6);
dxdt(1) = th1_d;
dxdt(2) = (800.0*tau(1) + 224.0*th1_d*th3_d*sin(th3)...
    + 448.0*th1_d*th2_d*sin(2.0*th2 + th3)...
    + 224.0*th1_d*th3_d*sin(2.0*th2 + th3)...
    + 98.0*th1_d*th2_d*sin(2*th2 + 2*th3)...
    + 98.0*th1_d*th3_d*sin(2*th2 + 2*th3)...
    + 640.0*th1_d*th2_d*sin(2.0*th2))/(224.0*cos(2.0*th2...
    + th3) + 49.0*cos(2*th2 + 2*th3) + 320.0*cos(2.0*th2)...
    + 224.0*cos(th3) + 669.0);
dxdt(3) = th2_d;
dxdt(4) = (450.0*(16.0*cos(th3) + 7.0)*(3.4335*cos(th2 + th3)...
    - 1.0*tau(3) + 0.28*th2_d^2*sin(th3) + 0.06125*th1_d^2*sin(2*th2...
    + 2*th3) + 0.28*th1_d^2*sin(th2 + th3)*cos(th2)))/(3360.0*cos(th3)...
    - 2016.0*cos(th3)^2 + 10495.0) - (9150.0*(13734.0*cos(th2 + th3)...
    - 4000.0*tau(2) + 47088.0*cos(th2) - 1120.0*th3_d^2*sin(th3)...
    + 1120.0*th1_d^2*sin(2.0*th2 + th3) + 245.0*th1_d^2*sin(2*th2...
    + 2*th3) + 1600.0*th1_d^2*sin(2.0*th2)...
    - 2240.0*th2_d*th3_d*sin(th3)))/(13440000.0*cos(th3)...
    - 8064000.0*cos(th3)^2 + 41980000.0);
dxdt(5) = th3_d;
dxdt(6) = (450.0*(16.0*cos(th3) + 7.0)*(3.4335*cos(th2 + th3)...
    - 1.0*tau(2) + 11.772*cos(th2) - 0.28*th3_d^2*sin(th3)...
    + 0.28*th1_d^2*sin(2.0*th2 + th3) + 0.06125*th1_d^2*sin(2*th2...
    + 2*th3) + 0.4*th1_d^2*sin(2.0*th2)...
    - 0.56*th2_d*th3_d*sin(th3)))/(3360.0*cos(th3)...
    - 2016.0*cos(th3)^2 + 10495.0) - (21.42857*(672.0*cos(th3)...
    + 1427.0)*(3.4335*cos(th2 + th3) - 1.0*tau(3)...
    + 0.28*th2_d^2*sin(th3) + 0.06125*th1_d^2*sin(2*th2 + 2*th3)...
    + 0.28*th1_d^2*sin(th2 + th3)*cos(th2)))/(3360.0*cos(th3)...
    - 2016.0*cos(th3)^2 + 10495.0);
end